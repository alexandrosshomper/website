# --- Basic Auth (stage only) ---
AuthType Basic
AuthName "Staging â€“ Private"
AuthUserFile /customers/3/6/f/alexandrosshomper.de/httpd.www/stage/.htpasswd
Require valid-user

# Protect the credentials file itself
<Files ".htpasswd">
  Require all denied
</Files>

# --- SPA fallback (React/Vue/Next static export) ---
Options -MultiViews
RewriteEngine On

# Don't rewrite real files or directories
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule - [L]

# Fallback all other routes to index.html
RewriteRule ^ index.html [QSA,L]

# (Optional hardening) block dotfiles except ACME if ever needed
<FilesMatch "^\.">
  Require all denied
</FilesMatch>
<DirectoryMatch "^\.well-known/acme-challenge">
  Require all granted
</DirectoryMatch>
