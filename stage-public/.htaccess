# --- Basic Auth (staging only) ---
AuthType Basic
AuthName "Staging Private"
AuthUserFile /customers/3/6/f/alexandrosshomper.de/httpd.www/stage/.htpasswd
Require valid-user

<Files ".htpasswd">
  Require all denied
</Files>

# --- Serve index by default & SPA fallback ---
DirectoryIndex index.html
Options -MultiViews
RewriteEngine On

# 0) NEVER rewrite static assets; if they don't exist, let Apache 404
RewriteRule ^(static/|assets/|_next/|favicon\.ico|manifest\.json|logo(192|512)\.png)$ - [L]

# 1) If the requested path exists as a file/dir -> serve it
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule - [L]

# 2) Everything else -> SPA fallback
RewriteRule ^ index.html [QSA,L]
